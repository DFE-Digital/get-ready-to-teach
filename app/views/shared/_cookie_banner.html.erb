<% if non_essential_cookies_preference.nil? %>
  <%= govuk_cookie_banner html_attributes: { data: { controller: "ookies", cookies_target: "banner" }, class: "idden" } do |cb| %>
    <% cb.with_message(heading_text: "Cookies on this service") do |m| %>
      <% m.with_action do %>
        <%= govuk_button_to "Accept additional cookies", cookie_preferences_path(cookie_preferences: { non_essential: true }), method: :patch %>
      <% end %>

      <% m.with_action do %>
        <%= govuk_button_to "Reject additional cookies", cookie_preferences_path(cookie_preferences: { non_essential: false }), method: :patch %>
      <% end %>

      <% m.with_action do %>
        <%= govuk_link_to "Read the cookie policy", "/cookies" %>
      <% end %>

      <p>We use some essential cookies to make this service work.</p>
      <p>Weâ€™d also like to use analytics cookies so we can understand how you use the service and make improvements.</p>
    <% end %>
  <% end %>
<% end %>
